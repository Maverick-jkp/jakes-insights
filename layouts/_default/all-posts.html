{{ define "main" }}
<div class="all-posts-page">

  <div class="all-posts-header">
    <h1 class="all-posts-title">{{ if eq .Language.Lang "ko" }}전체 글{{ else }}All Posts{{ end }}</h1>
    {{ $currentLangPages := where .Site.RegularPages "Language.Lang" .Site.Language.Lang }}
    {{ $posts := where $currentLangPages "Type" "!=" "page" }}
    <p class="all-posts-count">{{ len $posts }}{{ if eq .Language.Lang "ko" }}개의 글{{ else }} articles{{ end }}</p>
  </div>

  <div class="all-posts-grid">
    {{ $currentLangPages := where .Site.RegularPages "Language.Lang" .Site.Language.Lang }}
    {{ $posts := where $currentLangPages "Type" "!=" "page" }}
    {{ range $posts }}
    <a href="{{ .Permalink }}" class="post-card">
      <div class="post-card-image-wrap">
        {{ with .Params.image }}
        <img class="post-card-image" src="{{ . }}" alt="{{ $.Title }}" loading="lazy">
        {{ else }}
        <div class="post-card-image post-card-image--placeholder"></div>
        {{ end }}
      </div>
      <div class="post-card-content">
        <h2 class="post-card-title">{{ .Title }}</h2>
        <p class="post-card-excerpt">{{ .Summary | plainify | truncate 120 }}</p>
        <div class="post-card-meta">
          <span>{{ if eq $.Site.Language.Lang "ko" }}{{ .Date.Format "2006.01.02" }}{{ else }}{{ .Date.Format "Jan 2, 2006" }}{{ end }}</span>
          <span>{{ .ReadingTime }}{{ if eq $.Site.Language.Lang "ko" }}분{{ else }} min{{ end }}</span>
        </div>
      </div>
    </a>
    {{ end }}
  </div>

</div>
{{ end }}
