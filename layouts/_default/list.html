{{ define "main" }}

<div class="container">
  {{ if .IsHome }}
  {{/* Hero Section */}}
  <section class="hero" style="margin: 4rem 0;">
    <h2 style="font-size: 48px; font-weight: 700; margin-bottom: 1rem;">Global Tech Insights</h2>
    <p style="font-size: 20px; color: var(--text-secondary);">Where Silicon Valley meets Seoul</p>
  </section>

  {{/* Featured Post */}}
  {{ $pages := where .Site.RegularPages "Type" "in" (slice "en" "ko") }}
  {{ $latestPost := index $pages 0 }}
  {{ with $latestPost }}
  <article class="featured-post">
    {{ with .Params.image }}
    <img src="{{ . }}" alt="{{ $latestPost.Title }}" class="featured-post-image">
    {{ end }}
    <div class="featured-post-content">
      <h3 class="featured-post-title">
        <a href="{{ .Permalink }}" style="color: inherit; text-decoration: none;">{{ .Title }}</a>
      </h3>
      <p class="featured-post-excerpt">{{ .Description | truncate 200 }}</p>
      <div class="post-card-meta">
        <span class="post-card-meta-item">{{ .Date.Format "Jan 2, 2006" }}</span>
        <span class="post-card-meta-item">{{ .ReadingTime }} min read</span>
        <span class="post-card-meta-item">{{ .Language.LanguageName }}</span>
      </div>
    </div>
  </article>
  {{ end }}
  {{ end }}

  {{/* Section Title */}}
  <h2 class="section-title">Latest Posts</h2>

  {{/* Posts Grid */}}
  <div class="posts-grid">
    {{ $paginator := .Paginate (where .Site.RegularPages "Type" "in" (slice "en" "ko")) }}
    {{ range $index, $page := $paginator.Pages }}
      {{ if gt $index 0 }}  {{/* Skip first (already shown as featured) */}}
      <article class="post-card">
        <a href="{{ .Permalink }}" style="text-decoration: none; color: inherit;">
          {{ with .Params.image }}
          <img src="{{ . }}" alt="{{ $page.Title }}" class="post-card-image">
          {{ end }}
          <div class="post-card-content">
            <h3 class="post-card-title">{{ .Title }}</h3>
            <div class="post-card-meta">
              <span class="post-card-meta-item">{{ .Date.Format "Jan 2" }}</span>
              <span class="post-card-meta-item">{{ .ReadingTime }} min</span>
              <span class="post-card-meta-item">{{ .Language.LanguageName }}</span>
            </div>
          </div>
        </a>
      </article>
      {{ end }}
    {{ end }}
  </div>

  {{/* Pagination */}}
  {{ if gt $paginator.TotalPages 1 }}
  <nav class="pagination" style="margin: 3rem 0; text-align: center;">
    {{ if $paginator.HasPrev }}
      <a href="{{ $paginator.Prev.URL }}" class="btn btn-secondary">← Prev</a>
    {{ end }}
    <span style="margin: 0 1rem; color: var(--text-secondary);">Page {{ $paginator.PageNumber }} of {{ $paginator.TotalPages }}</span>
    {{ if $paginator.HasNext }}
      <a href="{{ $paginator.Next.URL }}" class="btn btn-secondary">Next →</a>
    {{ end }}
  </nav>
  {{ end }}
</div>

{{ end }}
