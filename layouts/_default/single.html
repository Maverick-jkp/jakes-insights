{{ define "main" }}

<div class="post-container">
  {{/* Left sidebar (empty for now) */}}
  <div></div>

  {{/* Main content */}}
  <article class="post-content">
    {{/* Post Header */}}
    <header class="post-header">
      <h1 class="post-title">{{ .Title }}</h1>

      <div class="post-meta">
        <span class="post-meta-item">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="16" y1="2" x2="16" y2="6"></line>
            <line x1="8" y1="2" x2="8" y2="6"></line>
            <line x1="3" y1="10" x2="21" y2="10"></line>
          </svg>
          {{ .Date.Format "January 2, 2006" }}
        </span>

        <span class="post-meta-item">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
          {{ .ReadingTime }} min read
        </span>

        <span class="post-meta-item">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
          </svg>
          {{ .Language.LanguageName }}
        </span>
      </div>
    </header>

    {{/* Post Image (if exists) */}}
    {{ with .Params.image }}
    <div style="margin: 2rem 0;">
      <img src="{{ . }}" alt="{{ $.Title }}" style="width: 100%; border-radius: 12px;">
    </div>
    {{ end }}

    {{/* Content */}}
    <div class="article-content">
      {{ .Content }}
    </div>

    {{/* Tags */}}
    {{ with .Params.tags }}
    <div class="tag-list">
      {{ range . }}
        <a href="{{ "/tags/" | relLangURL }}{{ . | urlize }}" class="tag-pill">{{ . }}</a>
      {{ end }}
    </div>
    {{ end }}

    {{/* Share Buttons */}}
    <div class="share-buttons">
      <button class="share-btn" onclick="navigator.share({title: '{{ .Title }}', url: '{{ .Permalink }}'})">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="18" cy="5" r="3"></circle>
          <circle cx="6" cy="12" r="3"></circle>
          <circle cx="18" cy="19" r="3"></circle>
          <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
          <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
        </svg>
        Share
      </button>

      <a href="https://twitter.com/intent/tweet?url={{ .Permalink }}&text={{ .Title }}" target="_blank" class="share-btn">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
          <path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"></path>
        </svg>
        Twitter
      </a>
    </div>

    {{/* Related Posts */}}
    {{ $related := .Site.RegularPages.Related . | first 3 }}
    {{ with $related }}
    <div class="related-posts">
      <h3>Related Posts</h3>
      <div class="related-posts-grid">
        {{ range . }}
        <article class="post-card">
          <a href="{{ .Permalink }}" style="text-decoration: none; color: inherit;">
            {{ with .Params.image }}
            <img src="{{ . }}" alt="{{ $.Title }}" class="post-card-image">
            {{ end }}
            <div class="post-card-content">
              <h4 class="post-card-title">{{ .Title }}</h4>
              <div class="post-card-meta">
                <span>{{ .Date.Format "Jan 2" }}</span>
                <span>{{ .ReadingTime }} min</span>
              </div>
            </div>
          </a>
        </article>
        {{ end }}
      </div>
    </div>
    {{ end }}
  </article>

  {{/* Table of Contents (Right sidebar) */}}
  <aside class="toc-sidebar">
    {{ partial "toc.html" . }}
  </aside>
</div>

{{ end }}
